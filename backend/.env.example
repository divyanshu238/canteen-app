# ================================
# CANTEEN BACKEND - ENVIRONMENT CONFIG
# ================================
# Copy this file to .env and fill in your values
# In production, set these as environment variables in your hosting platform

# ================================
# ENVIRONMENT
# ================================
# Set to 'production' for deployment
NODE_ENV=development

# ================================
# SERVER
# ================================
PORT=5000
# Your frontend URL (for CORS)
FRONTEND_URL=http://localhost:5173

# ================================
# DATABASE (REQUIRED)
# ================================
# MongoDB Atlas connection string
# Get from: https://cloud.mongodb.com
# Format: mongodb+srv://username:password@cluster.mongodb.net/dbname
MONGO_URI=mongodb+srv://your_user:your_password@cluster.mongodb.net/canteen?retryWrites=true&w=majority

# ================================
# AUTHENTICATION (REQUIRED IN PRODUCTION)
# ================================
# Generate strong secrets: openssl rand -hex 64
JWT_SECRET=your_jwt_secret_here_change_in_production
JWT_REFRESH_SECRET=your_refresh_secret_here_change_in_production
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# ================================
# RAZORPAY PAYMENTS (REQUIRED IN PRODUCTION)
# ================================
# Get from: https://dashboard.razorpay.com/app/keys
# Use rzp_test_... for testing, rzp_live_... for production
RAZORPAY_KEY_ID=rzp_test_your_key_id
RAZORPAY_KEY_SECRET=your_key_secret
# Set webhook in Razorpay Dashboard: https://your-domain.com/api/orders/webhook
RAZORPAY_WEBHOOK_SECRET=your_webhook_secret

# ================================
# SECURITY
# ================================
# Rate limiting: requests per window
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100

# CORS origins (comma-separated)
# In production, set to your frontend domain only
CORS_ORIGINS=http://localhost:5173,http://localhost:5174

# ================================
# SMS PROVIDER (OPTIONAL - for phone verification)
# ================================
# Provider: 'fast2sms' (India) | 'twilio' (Global) | 'console' (dev logging)
# Default: 'console' (logs OTP to console, for development)
SMS_PROVIDER=console

# Fast2SMS (India-focused, cost-effective)
# Get API key from: https://www.fast2sms.com
FAST2SMS_API_KEY=

# Twilio (Global coverage)
# Get credentials from: https://console.twilio.com
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# ================================
# OTP CONFIGURATION (OPTIONAL)
# ================================
# OTP length (default: 6)
OTP_LENGTH=6

# OTP expiry in minutes (default: 5)
OTP_EXPIRY_MINUTES=5

# Maximum verification attempts per OTP (default: 5)
OTP_MAX_ATTEMPTS=5

# Cooldown between resend requests in seconds (default: 60)
OTP_RESEND_COOLDOWN_SECONDS=60

# ================================
# FEATURE FLAGS (OPTIONAL)
# ================================
# Require phone verification for new users
# Set to 'true' to enable, 'false' to disable
# Default: 'false' (backward compatible - existing users not affected)
REQUIRE_PHONE_VERIFICATION=false

# Grandfather date for phone verification
# Users created before this date are exempt from phone verification
# Format: ISO date string (e.g., '2026-02-01T00:00:00Z')
# If not set, all existing users at deployment time are grandfathered
PHONE_VERIFICATION_GRANDFATHER_DATE=
